# Hermes Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# CORE SETTINGS
# =============================================================================

# JWT Secret Key - REQUIRED: Generate a secure random key
# Use: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
HERMES_SECRET_KEY=your-secret-key-change-this-in-production

# Debug mode - Set to false in production
HERMES_DEBUG=true

# =============================================================================
# API CONFIGURATION
# =============================================================================

# API port (internal Docker network)
API_PORT=8000

# =============================================================================
# REVERSE PROXY CONFIGURATION
# =============================================================================

# Hermes application port (Caddy proxy)
HERMES_PORT=3000

# Hermes HTTPS port (Caddy proxy)
HERMES_HTTPS_PORT=3443

# Development server port (Vite)
HERMES_DEV_PORT=5173

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database connection URL
# Development: sqlite+aiosqlite:///./data/hermes.db
# Production: postgresql+asyncpg://user:password@db:5432/hermes
HERMES_DATABASE_URL=sqlite+aiosqlite:///./data/hermes.db

# Enable SQL query logging (development only)
HERMES_DATABASE_ECHO=false

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis connection URL for task queuing and caching
# Development: redis://localhost:6379
# Docker: redis://redis:6379
# Production: redis://redis:6379/0
HERMES_REDIS_URL=redis://localhost:6379

# Redis database number
HERMES_REDIS_DB=0

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================

# Access token expiration (24 hours default)
HERMES_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Refresh token expiration (30 days default)
HERMES_REFRESH_TOKEN_EXPIRE_DAYS=30

# JWT signing algorithm
HERMES_ALGORITHM=HS256

# =============================================================================
# FILE STORAGE
# =============================================================================

# Directory for completed downloads (host path)
HERMES_DOWNLOAD_DIR=./packages/hermes-api/downloads

# Directory for temporary files (host path)
HERMES_TEMP_DIR=./packages/hermes-api/temp

# =============================================================================
# API KEYS & AUTHENTICATION
# =============================================================================

# Comma-separated list of valid API keys (if using API key auth)
HERMES_API_KEYS=

# =============================================================================
# RATE LIMITING & SECURITY
# =============================================================================

# Maximum requests per minute per IP
HERMES_RATE_LIMIT_PER_MINUTE=60

# Enable rate limiting
HERMES_ENABLE_RATE_LIMITING=true

# Enable token blacklisting for logout
HERMES_ENABLE_TOKEN_BLACKLIST=true

# Maximum failed login attempts before lockout
HERMES_MAX_LOGIN_ATTEMPTS=5

# Time window for login attempt tracking (minutes)
HERMES_LOGIN_ATTEMPT_WINDOW_MINUTES=15

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Comma-separated list of allowed CORS origins
# Include your frontend domain(s) here
# Examples:
# - Development: http://localhost:3000,http://localhost:5173,http://localhost:8000
# - Single domain: https://hermes.example.com
# - Separate domains: https://hermes.example.com,https://hermes-api.example.com
HERMES_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8000,https://hermes.example.com,https://hermes-api.example.com

# Allow credentials in CORS requests
HERMES_ALLOW_CREDENTIALS=true

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Frontend app port (Docker production build)
HERMES_APP_PORT=3000

# Downloads directory in container
HERMES_DOWNLOADS_DIR=/app/downloads

# Temporary directory in container
HERMES_TEMP_DIR=/app/temp

# =============================================================================
# FRONTEND BUILD CONFIGURATION
# =============================================================================

# API base URL for frontend builds (Vite build-time variable)
# This is used at build time to configure the API endpoints
# Examples:
# - Same domain: /api/v1
# - Separate domain: https://hermes-api.example.com/api/v1
# - Development: leave as /api/v1 (uses Docker proxy)
VITE_API_BASE_URL=/api/v1

# =============================================================================
# DEVELOPMENT SETUP
# =============================================================================

# For development with Docker Compose:
# 1. Copy this file: cp .env.example .env
# 2. Generate secret key: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
# 3. Run: docker compose -f docker-compose.dev.yml up

# =============================================================================
# PRODUCTION SETUP EXAMPLES
# =============================================================================

# Example 1: Single Domain (hermes.example.com)
# HERMES_DEBUG=false
# HERMES_SECRET_KEY=your-secure-production-key
# HERMES_DATABASE_URL=postgresql+asyncpg://user:password@db:5432/hermes
# HERMES_REDIS_URL=redis://redis:6379/0
# HERMES_ALLOWED_ORIGINS=https://hermes.example.com
# VITE_API_BASE_URL=/api/v1

# Example 2: Separate Domains (hermes.example.com + hermes-api.example.com)
# HERMES_DEBUG=false  
# HERMES_SECRET_KEY=your-secure-production-key
# HERMES_DATABASE_URL=postgresql+asyncpg://user:password@db:5432/hermes
# HERMES_REDIS_URL=redis://redis:6379/0
# HERMES_ALLOWED_ORIGINS=https://hermes.example.com,https://hermes-api.example.com
# VITE_API_BASE_URL=https://hermes-api.example.com/api/v1
